<html>
<head>
    <title></title>
    <script>
        function UserLogin() {
            var form = document.getElementById("login");
            var formData = new FormData(form);

            var xhttp = new XMLHttpRequest();
            xhttp.open("POST", "http://642e0559eb9c.sn.mynetname.net:8080/login", true);
            xhttp.setRequestHeader("Content-type", "application/json");
            xhttp.send(form);

            xhttp.onreadystatechange = function() {//Вызывает функцию при смене состояния.
                if(xhttp.readyState === XMLHttpRequest.DONE && xhttp.status === 200) {
                    var response = JSON.parse(xhttp.responseText);
                    ReadResponse(response);
                }
            }
        }

        function ReadResponse(response) {
            console.log(response.success + " " + response.error);
            if (response.success) {
                location.href = "../../lobby"
            } else {
                var errorDiv = document.getElementById("error");

                if (response.error === "not allow") {
                    errorDiv.innerHTML = "Не верный логин либо пароль"
                }
            }
        }
    </script>
</head>

<body>
<form method="POST" id="login" onsubmit="return false;">
    <table align="center">
        <tr>
            <td> Логин: </td>
            <td> <input type="text" name="username"> </td>
        </tr>
        <tr>
            <td> Пароль: </td>
            <td> <input type="password" name="password"> </td>
        </tr>
        <tr>
            <td> <input type="submit" value="Login" onclick="UserLogin()"> </td>
        </tr>
        <tr>
            <td> <div id="error"></div> </td>
        </tr>
    </table>
</form>
</body>
</html>